<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Anagrafica 5.0</title>
    <link rel="stylesheet" href="styleee.css">
</head>
<body>
<header>
    <h1>Anagrafica</h1>
</header>
<div class="rettangolo">

    <h2>Dati personali</h2>
    Nome:<br>
    <input type="text" id="nome"><br>

    Cognome:<br>
    <input type="text" id="cognome"><br>

    Anno di nascita:<br>
    <input type="number" id="nascita"><br>

    Username:<br>
    <input type="text" id="username"><br>

    Password:<br>
    <input type="text" id="password"><br>

    Email:<br>
    <input type="text" id="email"><br>

    <h2>Luogo di residenza</h2>
    Regione:<br>
    <select id="regione" onchange="caricaProvince()">
        <option value="">Seleziona regione</option>
        <option value="Abruzzo">Abruzzo</option>
        <option value="Basilicata">Basilicata</option>
        <option value="Calabria">Calabria</option>
        <option value="Campania">Campania</option>
        <option value="Emilia-Romagna">Emilia-Romagna</option>
        <option value="Friuli-Venezia Giulia">Friuli-Venezia Giulia</option>
        <option value="Lazio">Lazio</option>
        <option value="Liguria">Liguria</option>
        <option value="Lombardia">Lombardia</option>
        <option value="Marche">Marche</option>
        <option value="Molise">Molise</option>
        <option value="Piemonte">Piemonte</option>
        <option value="Puglia">Puglia</option>
        <option value="Sardegna">Sardegna</option>
        <option value="Sicilia">Sicilia</option>
        <option value="Toscana">Toscana</option>
        <option value="Trentino-Alto Adige">Trentino-Alto Adige</option>
        <option value="Umbria">Umbria</option>
        <option value="Valle d'Aosta">Valle d'Aosta</option>
        <option value="Veneto">Veneto</option>
    </select><br>
    Indirizzo:<br>
    <input type="text" id="indirizzo"><br>
    <h2>Genere</h2>
    <div class="checkbox-group">
        <input type="radio" name="genere" value="Femmina"> Femmina<br>
        <input type="radio" name="genere" value="Maschio"> Maschio<br>
        <input type="radio" name="genere" value="Altro"> Altro<br>
    </div>
    <h2>Mezzi posseduti</h2>
    <div class="checkbox-group">
        <input type="checkbox" class="mezzo" value="Bicicletta"> Bicicletta<br>
        <input type="checkbox" class="mezzo" value="Automobile"> Automobile<br>
        <input type="checkbox" class="mezzo" value="Moto"> Moto<br>
        <input type="checkbox" class="mezzo" value="Barca"> Barca<br>
        <input type="checkbox" class="mezzo" value="Monopattino"> Monopattino<br>
        <input type="checkbox" class="mezzo" value="Scooter"> Scooter<br>
    </div>
    <h2>Sport</h2>
    <select id="sport" multiple>
        <option>Atletica</option>
        <option>Pallavolo</option>
        <option>Nuoto</option>
        <option>Calcio</option>
        <option>Tennis</option>
        <option>Basket</option>
        <option>Rugby</option>
        <option>Hockey</option>
        <option>Pallanuoto</option>
        <option>Ciclismo</option>
        <option>Equitazione</option>
        <option>Arti marziali</option>
        <option>Boxe</option>
        <option>Danza</option>
        <option>Sci</option>
        <option>Snowboard</option>
        <option>Palestra</option>
    </select>
    <br><br>
    <input type="button" value="Inserisci" onclick="salva()">
    <input type="button" value="Svuota elenco" onclick="svuota()">
    <br><br>
    <a href="output2.html">Stampa</a>
</div>
<script>
let elenco = [];
function salva() {
    let nome=document.getElementById("nome").value;
    let cognome=document.getElementById("cognome").value;
    let email=document.getElementById("email").value;
    let password=document.getElementById("password").value;
    if (!document.getElementById("nome").value.match(/^[A-Za-z]+$/)) {
        alert("Nome non valido");
        return;
    }

    if (!document.getElementById("cognome").value.match(/^[A-Za-z]+$/)) {
        alert("Cognome non valido");
        return;
    }

   
    if (!document.getElementById("password").value.match(/^[A-Za-z0-9\-_]+$/)) {
        alert("Password non valida. Deve contenere solo lettere, numeri, - o _");
        return;
    }

    if (!document.getElementById("email").value.match(/^([a-z0-9_\.-]+)@([\da-z\.-]+)\.([a-z\.]{2,6})$/)) {
        alert("Email non valida");
        return;
    }
    let dati = localStorage.getItem("elenco");
    if (dati != null) elenco = JSON.parse(dati);
    let persona = {};
    persona.nome = document.getElementById("nome").value;
    persona.cognome = document.getElementById("cognome").value;
    persona.nascita = document.getElementById("nascita").value;
    persona.username = document.getElementById("username").value;
    persona.password = document.getElementById("password").value;
    persona.email = document.getElementById("email").value;
    persona.regione = document.getElementById("regione").value;
    persona.indirizzo = document.getElementById("indirizzo").value;
    let generi = document.getElementsByName("genere");
    persona.genere = "";
    for (let i = 0; i < generi.length; i++) {
        if (generi[i].checked) {
            persona.genere = generi[i].value;
            break;
        }
    }
    persona.mezzi = [];
    let mezzi = document.getElementsByClassName("mezzo");
    for (let i = 0; i < mezzi.length; i++) {
        if (mezzi[i].checked) persona.mezzi.push(mezzi[i].value);
    }
    persona.sport = [];
    let sportOpt = document.getElementById("sport").options;
    for (let i = 0; i < sportOpt.length; i++) {
        if (sportOpt[i].selected) persona.sport.push(sportOpt[i].value);
    }
    elenco.push(persona);
    localStorage.setItem("elenco", JSON.stringify(elenco));
}
function svuota() {
    localStorage.removeItem("elenco");
}
</script>
</body>
</html>
